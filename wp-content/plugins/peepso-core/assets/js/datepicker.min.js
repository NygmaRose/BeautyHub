!function(t){var e,a={},i={};window.peepsodatepickerdata&&peepsodatepickerdata.config&&(a=peepsodatepickerdata.config,e=_.map(a.daysShort,function(t){return t.replace(/^([a-z]{2}).+$/i,"$1")}),_.extend(i,{monthNames:a.months,monthNamesShort:a.monthsShort,dayNames:a.days,dayNamesShort:a.daysShort,dayNamesMin:e,currentText:a.today,dateFormat:a.format,isRTL:a.rtl,showButtonPanel:!0,currentText:a.today,closeText:a.apply,changeMonth:!0,changeYear:!0,yearRange:"-100:+0",firstDay:0})),_.extend(i,{beforeShow:function(t,e){e.dpDiv.wrap('<div class="peepso-datepicker" />')},beforeShowDay:function(){var e=t(this).data("datepicker");return n(e),[!0,""]},onClose:function(t,e){r(e),_.delay(function(){e.dpDiv.unwrap(".peepso-datepicker")},500)}}),t.jQueryDatepicker=t.datepicker,t.fn.jQueryDatepicker=t.fn.datepicker,t.fn.psDatepicker=function(e){return this.each(function(){var a=t(this),n="click.psDatepicker";return a.next("button").off(n).on(n,function(t){var e=a.data("datepicker").dpDiv;t.preventDefault(),t.stopPropagation(),e.is(":visible")?a.jQueryDatepicker("hide"):a.jQueryDatepicker("show")}),e=_.extend({},i,e||{}),a.jQueryDatepicker(e)})};var n=_.debounce(function(e){var a,i,n,o,p,s,f,u,v=e.dpDiv;n=(i=e).dpDiv,o=n.find(".ui-datepicker-prev"),p=n.find(".ui-datepicker-next"),s=n.find(".ui-datepicker-month"),f=n.find(".ui-datepicker-year"),u=n.find(".ui-datepicker-close"),r(i),n.on("keydown.ps-datepicker",{inst:i},d),o.on("click.ps-datepicker",{inst:i},l),p.on("click.ps-datepicker",{inst:i},l),s.on("change.ps-datepicker",{inst:i},l),f.on("change.ps-datepicker",{inst:i},l),u.on("click.ps-datepicker",{inst:i},h),c(e),(a=v.find(".ui-state-highlight")[0])||(a=v.find(".ui-state-active")[0]||v.find(".ui-datepicker-today a")[0]||v.find(".ui-state-default")[0],t(a).addClass("ui-state-highlight")),a.focus()},100);function r(t){var e=t.dpDiv,a=e.find(".ui-datepicker-prev"),i=e.find(".ui-datepicker-next"),n=e.find(".ui-datepicker-month"),r=e.find(".ui-datepicker-year"),d=e.find(".ui-datepicker-close");e.off("keydown.ps-datepicker"),a.off("click.ps-datepicker"),i.off("click.ps-datepicker"),n.off("change.ps-datepicker"),r.off("change.ps-datepicker"),d.off("click.ps-datepicker")}function d(e){var a,i,n,r,d,f,l,h,v,k,D,g,y,w,m=e.data.inst,j=e.target,x=e.which,M=e.altKey;37===x?(e.preventDefault(),e.stopPropagation(),function(e,a){var i,n,r=t(a).closest("td");r.length&&((i=r.prev("td")).length||(i=r.closest("tr").prev("tr").find("td").last()));i&&i.length&&(n=i.find(".ui-state-default"));n&&n.length?u(e,n):o(e,a,1)}(m,j)):36===x?(e.preventDefault(),e.stopPropagation(),y=m,(w=t(j).closest("tr").find(".ui-state-default").first())&&w.length&&u(y,w)):39===x?(e.preventDefault(),e.stopPropagation(),function(e,a){var i,n,r=t(a).closest("td");r.length&&((i=r.next("td")).length||(i=r.closest("tr").next("tr").find("td").first()));i&&i.length&&(n=i.find(".ui-state-default"));n&&n.length?u(e,n):p(e,a,1)}(m,j)):35===x?(e.preventDefault(),e.stopPropagation(),D=m,(g=t(j).closest("tr").find(".ui-state-default").last())&&g.length&&u(D,g)):38===x?(e.preventDefault(),e.stopPropagation(),function(e,a){var i,n=t(a).closest("td"),r=n.closest("tr").prev("tr").find("td").eq(n.prevAll().length);r&&r.length&&(i=r.find(".ui-state-default"));i&&i.length?u(e,i):o(e,a,7)}(m,j)):40===x?(e.preventDefault(),e.stopPropagation(),function(e,a){var i,n=t(a).closest("td"),r=n.closest("tr").next("tr").find("td").eq(n.prevAll().length);r&&r.length&&(i=r.find(".ui-state-default"));i&&i.length?u(e,i):p(e,a,7)}(m,j)):33===x?(e.preventDefault(),e.stopPropagation(),M?(l=j,h=(f=m).dpDiv,v=t(l).data("psDate"),k="#"+f.id.replace(/\\\\/g,"\\"),t.jQueryDatepicker._adjustDate(k,12,"M"),_.defer(function(){var t;c(f),t=(t=h.find("a.ui-state-default")).filter("[data-ps-date="+v+"]"),u(f,t)})):p(m,j)):34===x?(e.preventDefault(),e.stopPropagation(),M?(i=j,n=(a=m).dpDiv,r=t(i).data("psDate"),d="#"+a.id.replace(/\\\\/g,"\\"),t.jQueryDatepicker._adjustDate(d,-12,"M"),_.defer(function(){var t;c(a),t=(t=n.find("a.ui-state-default")).filter("[data-ps-date="+r+"]"),u(a,t)})):o(m,j)):13===x?s(m,j):27===x&&m.input.jQueryDatepicker("hide")}function o(e,a,i){var n=e.dpDiv,r=t(a).data("psDate"),d="#"+e.id.replace(/\\\\/g,"\\");void 0===i?r=new Date(e.drawYear,e.drawMonth,+r):"number"==typeof i&&(r=new Date(e.drawYear,e.drawMonth,+r-i)),t.jQueryDatepicker._adjustDate(d,-1,"M"),_.defer(function(){var t;c(e),t=(t=n.find("a.ui-state-default")).filter("[data-ps-date="+r.getDate()+"]"),u(e,t)})}function p(e,a,i){var n=e.dpDiv,r=t(a).data("psDate"),d="#"+e.id.replace(/\\\\/g,"\\");void 0===i?r=new Date(e.drawYear,e.drawMonth,+r):"number"==typeof i&&(r=new Date(e.drawYear,e.drawMonth,+r+i)),t.jQueryDatepicker._adjustDate(d,1,"M"),_.defer(function(){var t;c(e),t=(t=n.find("a.ui-state-default")).filter("[data-ps-date="+r.getDate()+"]"),u(e,t)})}function s(e,a){t(a).click()}function c(e){var a=e.dpDiv.find(".ui-datepicker-calendar"),i=e.settings,n=i.dayNames,r=i.monthNames[e.drawMonth],d=e.drawYear;a.attr("role","application"),a.find("tbody a.ui-state-default").attr("role","button").each(function(){var e,a=t(this),i=a.closest("td").prevAll().length,o=t.trim(a.text());e=o+", "+n[i]+" "+r+" "+d,a.removeClass("ui-state-hover"),a.attr("aria-label",e),a.attr("data-ps-date",o)})}function f(t){return t.dpDiv.find(".ui-state-highlight")}function u(e,a){e.dpDiv;var i=f(e),n=t(a);_.defer(function(){i.removeClass("ui-state-highlight"),n.focus(),n.addClass("ui-state-highlight")})}function l(t){var e=t.data.inst,a=new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=e.input;_.delay(function(){i.jQueryDatepicker("setDate",a)},100)}function h(t){var e=t.data.inst;s(0,f(e))}}(jQuery);