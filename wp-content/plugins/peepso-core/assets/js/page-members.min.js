new(function(e){function s(){s.super_.apply(this,arguments),e(e.proxy(this.init_page,this))}return peepso.npm.inherits(s,PsPageAutoload),peepso.npm.objectAssign(s.prototype,{init_page:function(){this._search_$query=e(".ps-js-members-query").on("input",e.proxy(this._filter,this)),this._search_$gender=e(".ps-js-members-gender").on("change",e.proxy(this._filter,this)),this._search_$sortby=e(".ps-js-members-sortby").on("change",e.proxy(this._filter,this)),this._search_$avatar=e(".ps-js-members-avatar").on("click",e.proxy(this._filter,this)),this._search_$following=e(".ps-js-members-following").on("change",e.proxy(this._filter,this)),this._search_$extended=e(".ps-js-filter-extended").find("input[type=radio], select"),this._search_$extended.prop("oninput",""),this._search_$extended.filter("select").addClass("ps-select").on("change",e.proxy(this._filter,this)),this._search_$extended.filter("input[type=radio]").on("click",e.proxy(function(s){var t=e(s.target);t.data("ps-checked")?(t.removeData("ps-checked"),t[0].checked=!1):t.data("ps-checked",1),this._filter()},this)),e(".ps-form-search-opt").on("click",e.proxy(this._toggle,this)),this._filter()},_search_url:"membersearch.search",_search_params:{uid:peepsodata.currentuserid,user_id:peepsodata.userid,query:void 0,order_by:void 0,order:void 0,peepso_gender:void 0,peepso_avatar:void 0,peepso_following:void 0,limit:2,page:1},_search_render_html:function(e){return e.members&&e.members.length?e.members.join(""):""},_search_get_items:function(){return this._search_$ct.children(".ps-members-item-wrapper")},_fetch:function(s){return e.Deferred(e.proxy(function(t){s=e.extend({},s),_.isUndefined(s.limit)||(s.limit*=2),this._fetch_xhr&&this._fetch_xhr.abort(),this._fetch_xhr=peepso.disableAuth().disableError().getJson(this._search_url,s,e.proxy(function(e){e.success?t.resolveWith(this,[e.data]):t.rejectWith(this,[e.errors])},this))},this))},_filter:function(){var s=e.trim(this._search_$query.val()),t=this._search_$sortby.val().split("|"),r=this._search_$gender.val(),i=this._search_$avatar[0].checked?1:0,h=this._search_$following[0].value,a={};this._fetch_xhr&&this._fetch_xhr.abort(),this._search_params.query=s||void 0,this._search_params.order_by=t[0]||void 0,this._search_params.order=t[1]||void 0,this._search_params.peepso_gender=r||void 0,this._search_params.peepso_avatar=i||void 0,this._search_params.peepso_following=h||void 0,this._search_params.page=1,this._search_$extended.each(function(){var s=e(this);"SELECT"===s[0].tagName?a[this.name]=this.value:"radio"===s.attr("type")&&(void 0===a[this.name]&&(a[this.name]=void 0),s[0].checked&&(a[this.name]=this.value))}),_.extend(this._search_params,a),this._search()},_toggle:function(){e(".ps-js-page-filters").stop().slideToggle()}}),s}(jQuery))(".ps-js-members");