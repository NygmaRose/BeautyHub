!function(a,b,c){var d=function(a,b){function c(){}return c.prototype.block_user=function(c,d){var e,f=this.block_user,g="block_"+c;f[g]||(d&&(d=b(d),d.find("img").css("display","inline")),e={uid:peepsodata.currentuserid,user_id:c},f[g]=!0,peepso.postJson("activity.blockuser",e,b.proxy(function(d){var e=b(".ps-js-focus--"+c),h=e.find(".ps-focus-actions, .ps-focus-actions-mobile"),i=d.data;f[g]=!1,d.success&&(i&&i.actions&&h.html(i.actions),ps_observer.apply_filters("ps_member_user_blocked",c,i),i&&(i.header||i.message)&&psmessage.show(i.header,i.message,psmessage.fade_time),i.redirect&&setTimeout(function(){a.location=i.redirect},Math.min(1e3,psmessage.fade_time)))},this)))},c.prototype.unblock_user=function(a,c){var d,e=this.unblock_user,f="block_"+a;e[f]||(c&&(c=b(c),c.find("img").css("display","inline")),d={uid:peepsodata.currentuserid,user_id:a},e[f]=!0,peepso.postJson("activity.unblockuser",d,b.proxy(function(d){var g=b(".ps-js-focus--"+a),h=g.find(".ps-focus-actions, .ps-focus-actions-mobile"),i=d.data;e[f]=!1,d.success&&(i&&i.actions&&h.html(i.actions),ps_observer.apply_filters("ps_member_user_unblocked",a,i),i&&(i.header||i.message)&&psmessage.show(i.header,i.message,psmessage.fade_time),b(c).closest(".ps-members-item-wrapper").fadeOut("fast"))},this)))},c.prototype.ban_user=function(a,c){if(!this.banning_user){c&&(c=b(c),c.find("img").css("display","inline"));var d=peepsomemberdata.ban_popup_title,e=peepsomemberdata.ban_popup_content,f=['<button type="button" class="ps-btn ps-btn-small ps-button-cancel" onclick="return pswindow.do_no_confirm();">',peepsomemberdata.ban_popup_cancel,"</button>",'<button type="button" class="ps-btn ps-btn-small ps-button-action" onclick="return ps_member.do_ban_user('+a+');">',peepsomemberdata.ban_popup_save,"</button>"].join(" "),g=pswindow.show(d,e).set_actions(f),h=g.$container;h.find("#ban-forever").on("focus",function(){b("#ban-period-empty").hide()}),ps_datepicker.init(h.find("[name=ban_period_date]"))}},c.prototype.do_ban_user=function(c){var d,e=b("#form_ban_user"),f=e.find("input[name=ban_type]:checked").val();if("ban_period"===f&&!(d=e.find("input[name=ban_period_date]").data("value")))return e.find("#ban-period-empty").show(),!1;var g={user_id:c,ban_status:1,ban_type:f,ban_period_date:d};this.banning_user=!0,peepso.postJson("activity.set_ban_status",g,b.proxy(function(b){this.banning_user=!1,b.success&&(ps_observer.apply_filters("ps_member_user_banned",c,b.data),psmessage.show(b.data.header,b.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this))},c.prototype.unban_user=function(c,d){this.unbanning_user||(d&&(d=b(d),d.find("img").css("display","inline")),this.unbanning_user=!0,peepso.postJson("activity.set_ban_status",{user_id:c,ban_status:0},b.proxy(function(b){this.unbanning_user=!1,b.success&&(ps_observer.apply_filters("ps_member_user_unbanned",c,b.data),psmessage.show(b.data.header,b.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this)))},c}(a,b);ps_member=new d}(window,jQuery);