!function(e){e("input[name=peepso_admin_verbose_tabs]").on("click",_.throttle(function(t,i){var n=e(".ps-label-optional"),a=peepsodata.ajaxurl;this.checked?n.show():n.hide(),i||e.post({url:a,data:{action:"peepso_admin_verbose_tabs",value:+this.checked}})},1e3)).triggerHandler("click",[!0]),e("input[name=peepso_admin_verbose_fields]").on("click",_.throttle(function(t,i){var n=e(".lbl-descript");url=peepsodata.ajaxurl,action="peepso_admin_verbose_fields",this.checked?n.show():n.hide(),i||e.post({url:url,data:{action:action,value:+this.checked}})},1e3)).triggerHandler("click",[!0]),e("input[name=bundle]").on("click",_.throttle(function(t,i){var n=e(".license_status_check");$bundleLicense=e("input[name=bundle_license]"),bundleLicense=$bundleLicense.val(),checked=this.checked,checked?($bundleLicense.closest(".form-group").show(),e("#field_bundle_message").hide()):($bundleLicense.closest(".form-group").hide(),e("#field_bundle_message").show()),n.each(function(){var t=e(this).closest("label").next("div.form-field").find("input");checked?(t.data("origLicense",t.val()),t.val(bundleLicense),t.attr("readonly","readonly").css("opacity",.5)):i||(t.removeAttr("readonly").css("opacity",""),t.val(t.data("origLicense")||""))})},100)).triggerHandler("click",[!0]),e("input[name=bundle_license]").on("input",_.throttle(function(t){var i=e(".license_status_check"),n=this.value;e("input[name=bundle]")[0].checked&&i.each(function(){e(this).closest("label").next("div.form-field").find("input").val(n)})},100)),e("input[name=loadmore_enable]").on("click",_.throttle(function(){var t=e("select[name=loadmore_repeat]").closest(".form-group");this.checked?t.show():t.hide()},100)).triggerHandler("click"),e("select[name=notification_ajax_delay_min]").on("change",_.throttle(function(){var t=e("select[name=notification_ajax_delay]"),i=+t.val(),n=+this.value;i<n&&t.val(n)},100)),e("select[name=notification_ajax_delay]").on("change",_.throttle(function(){var t=+e("select[name=notification_ajax_delay_min]").val();+this.value<t&&e(this).val(t)},100)).triggerHandler("change"),e(document).ready(function(){var t=500,i=e("input[name='site_reporting_enable']");i.size()>0&&i.on("change",function(){e(this).is(":checked")?e("#field_site_reporting_types").fadeIn():e("#field_site_reporting_types").fadeOut()}).trigger("change");var n=e("input[name='site_registration_recaptcha_enable']");n.size()>0&&n.on("change",function(){e(this).is(":checked")?(e("#field_site_registration_recaptcha_sitekey").fadeIn(t),e("#field_site_registration_recaptcha_secretkey").fadeIn(t),e("#field_site_registration_recaptcha_description").fadeIn(t)):(e("#field_site_registration_recaptcha_sitekey").fadeOut(t),e("#field_site_registration_recaptcha_secretkey").fadeOut(t),e("#field_site_registration_recaptcha_description").fadeOut(t))}).trigger("change");var a=e("input[name='site_registration_enableterms']");a.size()>0&&a.on("change",function(){e(this).is(":checked")?e("#field_site_registration_terms").fadeIn(t):e("#field_site_registration_terms").fadeOut(t)}).trigger("change");var r=e("input[name='site_registration_enableprivacy']");r.size()>0&&r.on("change",function(){e(this).is(":checked")?e("#field_site_registration_privacy").fadeIn(t):e("#field_site_registration_privacy").fadeOut(t)}).trigger("change");var o=e("input[name='avatars_wordpress_only']");o.size()>0&&o.on("change",function(){e(this).is(":checked")?(e("#field_avatars_peepso_only").fadeOut(t),e("#field_avatars_peepso_gravatar").fadeOut(t),e("#field_avatars_wordpress_only_desc").fadeIn(t)):(e("#field_avatars_peepso_only").fadeIn(t),e("#field_avatars_peepso_gravatar").fadeIn(t),e("#field_avatars_wordpress_only_desc").fadeOut(t))}).trigger("change"),function(){var t=e(".license_status_check"),i={};function n(){$PeepSo.postJson("adminConfigLicense.check_license",{plugins:i},function(i){var n,a,r,o;if(i.success){n=i.data&&i.data.valid||{},a=i.data&&i.data.details||{};for(r in n)+n[r]?(o='<i class="ace-icon fa fa-check bigger-110" style="color:green"></i>',e("#error_"+r).hide()):(o='<i class="ace-icon fa fa-times bigger-110" style="color:red"></i>',e("#error_"+r).show()),a[r]&&(o=o+"<br/>"+a[r]),t.filter("#"+r).html(o)}})}t.length&&(t.each(function(){var t=e(this);i[t.attr("id")]=t.data("plugin-name"),t.closest("label").next("div.form-field").find("input").on("input focus blur",_.throttle(function(t){var i=this.value,n=e.trim(i);i!==n&&(this.value=n)},500))}),n(),setInterval(function(){n()},3e4))}();var s=e("#reset-check");if(s.length){var l=e("#reset-do");s.on("click",function(){this.checked?l.removeAttr("disabled"):l.attr("disabled","disabled")}),l.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=window.location.href;t=t.replace("&reset=1",""),window.location=t+"&reset=1"})}var c,d,p=window.location.href.match(/page=peepso_config(&(tab=[-a-z]+))?/i),g="rgba(240,245,250,.7)";p&&(d=(c=e("#toplevel_page_peepso li.current ul.wp-submenu-wrap").find("a[href]")).filter('[href$="'+(p[2]||"tab=site")+'"]'),c.not(d).css({color:g,fontWeight:"normal"}).on("mouseenter",function(){e(this).css({color:"#00b9eb"})}).on("mouseleave",function(){e(this).css({color:g})}))});var t={};function i(){e("input[type=text].validate").off("keyup.validate").on("keyup.validate",function(){var i,o,l=e(this);i=l,o=l.data(),clearTimeout(n),n=setTimeout(function(){var e,n,l,c,d,p,g,h,u,_,f;"int"===o.ruleType?(u=o,_=+(h=i).val(),f=h.attr("name"),u.ruleMin=+u.ruleMin,u.ruleMax=+u.ruleMax,u.ruleMin&&_<u.ruleMin?(a(h,u),t[f]=!0):u.ruleMax&&_>u.ruleMax?(a(h,u),t[f]=!0):(r(h,u),t[f]=!1,delete t[f]),s()):"email"===o.ruleType?(p=o,g=(d=i).val(),/^([*+!.&#$Â¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,15})$/i.test(g)?(r(d,p),t[name]=!1,delete t[name]):(a(d,p),t[name]=!0),s()):(n=o,l=(e=i).val(),c=e.attr("name"),n.ruleMinLength=+n.ruleMinLength,n.ruleMaxLength=+n.ruleMaxLength,n.ruleMinLength&&l.length<n.ruleMinLength?(a(e,n),t[c]=!0):n.ruleMaxLength&&l.length>n.ruleMaxLength?(a(e,n),t[c]=!0):(r(e,n),t[c]=!1,delete t[c]),s())},300)}).trigger("keyup")}var n=!1;function a(t,i){t.hasClass("error")||(i.ruleMessage&&(t.next(".validate-error").length||e(['<div class="validate-error tooltip bottom">','<div class="tooltip-arrow"></div>','<div class="tooltip-inner">',i.ruleMessage,"</div></div>"].join("")).insertAfter(t)),t.addClass("error"))}function r(e,t){e.hasClass("error")&&e.removeClass("error")}var o=!1;function s(){clearTimeout(o),o=setTimeout(l,300)}function l(){var i,n=!1;for(i in t)if(t[i]){n=!0;break}var a=e("#peepso button[type=submit]");n?a.attr("disabled","disabled"):a.removeAttr("disabled")}var c=!1;function d(){clearTimeout(c),c=setTimeout(p,300)}function p(){e("#edit_warning").show()}function g(t){e(".img-landing-page-preview").attr("src",t).show(),e(".btn-lp-img-remove").show(),e(".default-img-selected").hide(),e("#landing_page_image").val(t)}function h(){e("#landing_page_image").val(""),e(".img-landing-page-preview").attr("src",e("#landing_page_image_default").val()),e(".btn-lp-img-remove").hide(),e(".default-img-selected").show()}e(function(){i(),e("#peepso button[type=reset]").on("click",function(){setTimeout(i,100),setTimeout(function(){e("#edit_warning").hide()},1e3)}),setTimeout(function(){e("#peepso").find("input[type=text], textarea").on("keyup",function(){d()}),e("#peepso").find("input[type=checkbox], select").on("change",function(){d()})},1e3)}),e(document).ready(function(){e(".inline-select").length>0&&e(".inline-select").on("click",function(t){e(this).closest("ul").find("a").removeClass("btn-primary"),e(this).closest(".form-group").find('input[type="hidden"]').val(e(this).attr("data-value")),e(this).addClass("btn-primary"),t.preventDefault()});var t=e("input[name='opengraph_enable']");function i(t){e(".img-og-preview").attr("src",t).show(),e(".btn-img-remove").show(),e(".no-img-selected").hide(),e("#opengraph_image").val(t)}function n(){e("#opengraph_image").val(""),e(".img-og-preview").attr("src",""),e(".img-og-preview, .btn-img-remove").hide(),e(".no-img-selected").show()}t.size()>0&&(t.on("change",function(){$selector=e(this).closest(".inside").find('[id*="field_"]').not("#field_opengraph_enable"),e(this).is(":checked")?$selector.fadeIn(500):$selector.fadeOut(500)}).trigger("change"),e("#opengraph_title").after("<p class='text-right'><span class='opengraph_title_counter'></span> Characters</p><p>Depending on where the links will be shared, the title can be cropped to even 40 characters. Keep the title short and to the point.</p>"),e(".opengraph_title_counter").html(e("#opengraph_title").val().length),e("#opengraph_title").on("keyup",function(t){e(".opengraph_title_counter").html(e("#opengraph_title").val().length)}),e("#opengraph_description").after("<p class='text-right'><span class='opengraph_description_counter'></span> Characters</p><p>Depending on where the links will be shared, the description can be cropped to even 200 characters. Keep the description short and to the point.</p>"),e(".opengraph_description_counter").html(e("#opengraph_description").val().length),e("#opengraph_description").on("keyup",function(t){e(".opengraph_description_counter").html(e("#opengraph_description").val().length)})),$og_image_prop='<a class="btn btn-sm btn-info btn-img-og" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-img-remove" href="#">Remove Image</a><span class="no-img-selected">No image selected</span><img class="img-responsive img-og-preview" src="" />',e("#opengraph_image").after($og_image_prop).hide(),""!=e("#opengraph_image").val()?i(e("#opengraph_image").val()):n(),e(".btn-img-og").on("click",function(t){var n=e(this);wp.media.editor.send.attachment=function(e,t){i(t.url)},wp.media.editor.open(n)}),e(".btn-img-remove").on("click",function(e){n(),e.preventDefault()})}),$lp_image_prop='<a class="btn btn-sm btn-info btn-img-landing-page" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-lp-img-remove" href="#">Remove Image</a><span class="default-img-selected">Default image selected</span><img class="img-responsive img-landing-page-preview" src="" />',e("#landing_page_image").after($lp_image_prop).hide(),e("#landing_page_image_default").hide(),""!=e("#landing_page_image").val()?g(e("#landing_page_image").val()):h(),e(".btn-img-landing-page").on("click",function(t){var i=e(this);wp.media.editor.send.attachment=function(e,t){g(t.url)},wp.media.editor.open(i)}),e(".btn-lp-img-remove").on("click",function(e){h(),e.preventDefault()}),e(".notice.is-dismissible.peepso-new-plugin").on("click",".notice-dismiss",function(){e.post(ajaxurl,{action:"dismiss_new_plugin_notice"})})}(jQuery);